clear();

field = add_unit("sam_mw_pt_heliostatfield");


weather = add_unit("weatherreader");

//Set weather parameters
wfile = "C:/SAM/2014.1.14/weather/CA Daggett.tm2";

set_value(weather, "file_name", wfile);
set_value(weather, "track_mode", 1);
set_value(weather, "tilt", 0);
set_value(weather, "azimuth", 0);


set_value(field, "run_type", 0);
set_value(field, "helio_width", 12.);
set_value(field, "helio_height", 12.);
set_value(field, "helio_optical_error", 0.00153);
set_value(field, "helio_active_fraction", 0.97);
set_value(field, "helio_reflectance", 0.90);
set_value(field, "rec_absorptance", 0.94);
set_value(field, "rec_height", 22.);
set_value(field, "rec_aspect", 1.2);
set_value(field, "rec_hl_perm2", 30.);
set_value(field, "q_design", 100.);
set_value(field, "h_tower", 130);
set_value(field, "weather_file", wfile);
set_value(field, "land_bound_type", 0);
set_value(field, "land_max", 7.5);
set_value(field, "land_min", 0.75);
set_value(field, "p_start", 0.025);
set_value(field, "p_track", 0.055);
set_value(field, "hel_stow_deploy", 8);
set_value(field, "v_wind_max", 25.);
set_value(field, "n_flux_x", 10);
set_value(field, "n_flux_y", 1);

connect(weather, "wspd", field, "vwind");
set_value(field, "field_control", 1.);
connect(weather, "solzen", field, "solzen");
connect(weather, "solazi", field, "solaz");

simulate(1, 8760, 1, 30, false);
